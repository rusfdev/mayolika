{"version":3,"sources":["c3dpano.js"],"names":["Ceramic3DPanorama","t","U","e","d","B","C","width","height","b","V","requestAnimationFrame","scrollWidth","scrollHeight","K","i","F","l","E","W","L","G","n","j","k","Math","tan","PI","h","X","g","c","f","cos","sin","m","a","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","useProgram","u","bindBuffer","ARRAY_BUFFER","M","vertexAttribPointer","N","FLOAT","uniformMatrix3fv","Y","uniformMatrix4fv","Z","uniform1f","$","ia","activeTexture","TEXTURE0","bindTexture","TEXTURE_CUBE_MAP","aa","uniform1i","ba","drawArrays","TRIANGLES","ca","createShader","VERTEX_SHADER","getShaderParameter","COMPILE_STATUS","FRAGMENT_SHADER","shaderSource","compileShader","createProgram","attachShader","linkProgram","getProgramInfoLog","error","getShaderInfoLog","console","I","document","getElementById","getProgramParameter","LINK_STATUS","v","Float32Array","Array","da","ea","ga","ha","D","clearColor","canvas","H","fa","getUniformLocation","P","getAttribLocation","enableVertexAttribArray","O","createBuffer","bufferData","STATIC_DRAW","panorams","y","ja","pageX","offsetLeft","onmouseout","onmousedown","which","min","wheelDelta","max","deltaY","createTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","RGBA","UNSIGNED_BYTE","generateMipmap","NO_ERROR","texParameteri","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","LINEAR","onmousemove","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","isNaN","p","total","q","w","z","loaded","r","la","onmouseup","this","status","onwheel","getAllResponseHeaders","match","Blob","type","response","Q","S","window","XMLHttpRequest","onprogress","getError","R","s","J","x","substr","lastIndexOf","T","onload","ka","URL","A","open","send","length"],"mappings":"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","file":"../c3dpano.min.js","sourcesContent":["function Ceramic3DPanorama(t) {\r\n  function U(e, d) {\r\n    B = e;\r\n    C = d;\r\n    b.width = e;\r\n    b.height = d;\r\n    a.viewport(0, 0, e, d);\r\n    j = !0\r\n  }\r\n\r\n  function V() {\r\n    requestAnimationFrame(V);\r\n    if (b.scrollWidth != B || b.scrollHeight != C) U(b.scrollWidth, b.scrollHeight), K = i - 1;\r\n    if (D && (0 != E || 0 != F)) {\r\n      var e = F;\r\n      l += E * W;\r\n      n += e * W;\r\n      l > L ? l -= L : 0 >= l && (l += L);\r\n      n > G ? n = G : n < -G && (n = -G);\r\n      F = E = 0;\r\n      j = !0\r\n    }\r\n    if (K != i) {\r\n      K = i;\r\n      j = !0;\r\n      var d = B / C,\r\n        e = 0.05 * Math.tan((Math.PI / 3 - i / 10) / 2),\r\n        d = e * d,\r\n        k = -d,\r\n        h = -e,\r\n        X = 1 / (d - k),\r\n        g = 1 / (e - h),\r\n        f = 1 / -9.95;\r\n      c[0] = 0.1 * X;\r\n      c[1] = 0;\r\n      c[2] = 0;\r\n      c[3] = 0;\r\n      c[4] = 0;\r\n      c[5] = 0.1 * g;\r\n      c[6] = 0;\r\n      c[7] = 0;\r\n      c[8] = (k + d) * X;\r\n      c[9] =\r\n        (h + e) * g;\r\n      c[10] = 10.05 * f;\r\n      c[11] = -1;\r\n      c[12] = 0;\r\n      c[13] = 0;\r\n      c[14] = 1 * f;\r\n      c[15] = 0\r\n    }\r\n    j && (j = !1, e = Math.cos(l), d = Math.sin(l), k = Math.cos(n), h = Math.sin(n), m[0] = e, m[1] = d * h, m[2] = -(d * k), m[3] = 0, m[4] = k, m[5] = h, m[6] = d, m[7] = -(e * h), m[8] = e * k, a.clear(a.COLOR_BUFFER_BIT | a.DEPTH_BUFFER_BIT), a.useProgram(u), a.bindBuffer(a.ARRAY_BUFFER, M), a.vertexAttribPointer(N, 3, a.FLOAT, !1, 0, 0), a.uniformMatrix3fv(Y, !1, m), a.uniformMatrix4fv(Z, !1, c), a.uniform1f($, ia), a.activeTexture(a.TEXTURE0), a.bindTexture(a.TEXTURE_CUBE_MAP, aa), a.uniform1i(ba, 0), a.drawArrays(a.TRIANGLES,\r\n      0, 36))\r\n  }\r\n\r\n  function ja() {\r\n    for (var a = new v(108), d = new v(3), k = new v(3), h = 0, b = 0; 3 > b; b++) {\r\n      d[0] = b;\r\n      d[1] = (b + 1) % 3;\r\n      d[2] = (b + 2) % 3;\r\n      for (var c = -1; 2 > c; c += 2)\r\n        for (var g = 0, i = -1; 2 > i; i += 2)\r\n          for (var j = -1; 2 > j; j += 2) {\r\n            k[d[0]] = c;\r\n            k[d[1]] = i;\r\n            k[d[2]] = j;\r\n            for (var f = 0; 3 > f; f++) a[3 * h + f] = k[f];\r\n            if (1 == g || 2 == g)\r\n              for (f = 0; 3 > f; f++) a[3 * (h + 2) + f] = k[f];\r\n            2 == g && (h += 2);\r\n            h++;\r\n            g++\r\n          }\r\n    }\r\n    return a\r\n  }\r\n\r\n  function ca(e, d) {\r\n    var b = a.createShader(a.VERTEX_SHADER);\r\n    a.shaderSource(b, e);\r\n    a.compileShader(b);\r\n    if (a.getShaderParameter(b, a.COMPILE_STATUS)) {\r\n      var h = a.createShader(a.FRAGMENT_SHADER);\r\n      a.shaderSource(h, d);\r\n      a.compileShader(h);\r\n      if (a.getShaderParameter(h, a.COMPILE_STATUS)) {\r\n        var c = a.createProgram();\r\n        a.attachShader(c, b);\r\n        a.attachShader(c, h);\r\n        a.linkProgram(c);\r\n        if (a.getProgramParameter(c, a.LINK_STATUS)) return c;\r\n        console.error(a.getProgramInfoLog(c))\r\n      } else console.error(a.getShaderInfoLog(h))\r\n    } else console.error(a.getShaderInfoLog(b))\r\n  }\r\n\r\n  function da() {\r\n    ea || (requestAnimationFrame(da), (b.scrollWidth != B || b.scrollHeight != C) && U(b.scrollWidth, b.scrollHeight), j && (j = !1, a.clear(a.COLOR_BUFFER_BIT | a.DEPTH_BUFFER_BIT),\r\n      a.useProgram(H), a.bindBuffer(a.ARRAY_BUFFER, O), a.vertexAttribPointer(P, 3, a.FLOAT, !1, 0, 0), a.uniform1f(fa, I), a.drawArrays(a.TRIANGLES, 0, 6)))\r\n  }\r\n  var I = 0,\r\n    fa, P, O, H, ea = !1,\r\n    B, C, b = t.canvas;\r\n  \"string\" === typeof b && (b = document.getElementById(b));\r\n  var a = b.getContext(\"webgl\") || b.getContext(\"experimental-webgl\"),\r\n    aa, u, Y, Z, ba, $, N, M, j = !0,\r\n    ia = 1 == t.cameraVersion ? 1 : -1;\r\n  if (!v) var v = \"undefined\" !== typeof Float32Array ? Float32Array : Array;\r\n  var K = -100,\r\n    i = 0,\r\n    c = new v(16),\r\n    m = new v(9),\r\n    W = Math.PI / 200,\r\n    L = 2 * Math.PI,\r\n    G = Math.PI / 2,\r\n    l = 0,\r\n    n = 0,\r\n    ga = 0,\r\n    ha = 0,\r\n    D = !1,\r\n    E = 0,\r\n    F = 0;\r\n  a.clearColor(1, 1, 1, 1);\r\n  H = ca(\"attribute vec3 a; varying vec2 v; void main() {v = a.xy; gl_Position = vec4(a, 1.0);}\", \"precision mediump float; uniform float perc; varying vec2 v; void main() {if (abs(v.x) > 0.4 || abs(v.y) > 0.05) discard;if ((v.x + 0.4)/0.8 < perc) gl_FragColor = vec4(0.0, 0.7, 0.0, 1.0); else gl_FragColor = vec4(0.7, 0.7, 0.7, 1.0);}\");\r\n  fa = a.getUniformLocation(H, \"perc\");\r\n  P = a.getAttribLocation(H, \"a\");\r\n  a.enableVertexAttribArray(P);\r\n  O = a.createBuffer();\r\n  a.bindBuffer(a.ARRAY_BUFFER,\r\n    O);\r\n  a.bufferData(a.ARRAY_BUFFER, new v([-1, -1, 0, -1, 1, 0, 1, -1, 0, 1, 1, 0, -1, 1, 0, 1, -1, 0]), a.STATIC_DRAW);\r\n  da();\r\n  var Q = t.panorams[0],\r\n    t = function () {\r\n      u = ca(\"uniform mat3 vm; uniform mat4 pm; attribute vec3 a; varying vec3 v; void main() {v = a; gl_Position = pm * vec4(vm * a, 1.0);}\", \"precision mediump float; uniform samplerCube t; uniform float Ysign; varying vec3 v; void main() {gl_FragColor = textureCube(t, vec3(v.x, Ysign * v.z, -v.y));}\");\r\n      Y = a.getUniformLocation(u, \"vm\");\r\n      Z = a.getUniformLocation(u, \"pm\");\r\n      ba = a.getUniformLocation(u,\r\n        \"t\");\r\n      $ = a.getUniformLocation(u, \"Ysign\");\r\n      N = a.getAttribLocation(u, \"a\");\r\n      a.enableVertexAttribArray(N);\r\n      M = a.createBuffer();\r\n      a.bindBuffer(a.ARRAY_BUFFER, M);\r\n      a.bufferData(a.ARRAY_BUFFER, ja(), a.STATIC_DRAW)\r\n    },\r\n    y = function () {\r\n      R--;\r\n      if (0 == R) {\r\n        var e = f;\r\n        b.onmousemove = function (a) {\r\n          var e = a.pageX - b.offsetLeft,\r\n            a = a.pageY - b.offsetTop;\r\n          E = e - ga;\r\n          F = a - ha;\r\n          ga = e;\r\n          ha = a\r\n        };\r\n        b.onmouseout = function () {\r\n          D = !1\r\n        };\r\n        b.onmousedown = function (a) {\r\n          1 == a.which && (D = !0)\r\n        };\r\n        b.onmouseup = function (a) {\r\n          1 == a.which && (D = !1)\r\n        };\r\n        b.onwheel = function (a) {\r\n          0 < a.wheelDelta ? i = Math.min(i + 1,\r\n            6) : 0 > a.wheelDelta && (i = Math.max(i - 1, -10));\r\n          0 > a.deltaY ? i = Math.min(i + 1, 6) : 0 < a.deltaY && (i = Math.max(i - 1, -10))\r\n        };\r\n        var d = a.createTexture();\r\n        a.bindTexture(a.TEXTURE_CUBE_MAP, d);\r\n        a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL, !0);\r\n        for (var c = 0; 6 > c; c++) a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X + c, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, e[c]);\r\n        a.generateMipmap(a.TEXTURE_CUBE_MAP);\r\n        a.getError() == a.NO_ERROR ? a.texParameteri(a.TEXTURE_CUBE_MAP, a.TEXTURE_MIN_FILTER, a.LINEAR_MIPMAP_LINEAR) : a.texParameteri(a.TEXTURE_CUBE_MAP, a.TEXTURE_MIN_FILTER,\r\n          a.LINEAR);\r\n        a.texParameteri(a.TEXTURE_CUBE_MAP, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);\r\n        a.texParameteri(a.TEXTURE_CUBE_MAP, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);\r\n        a.texParameteri(a.TEXTURE_CUBE_MAP, a.TEXTURE_MAG_FILTER, a.LINEAR);\r\n        a.bindTexture(a.TEXTURE_CUBE_MAP, null);\r\n        aa = d;\r\n        ea = !0;\r\n        j = !1;\r\n        V()\r\n      }\r\n    },\r\n    ka = function (a) {\r\n      return function (b) {\r\n        isNaN(p[a]) && 0 < b.total && (p[a] = b.total, q[a] = 0, w += b.total, z--);\r\n        !isNaN(p[a]) && b.loaded > q[a] && (r += b.loaded - q[a], q[a] = b.loaded, 0 == z && (I = r / w, j = !0))\r\n      }\r\n    },\r\n    la = function (a, b) {\r\n      return function () {\r\n        isNaN(p[a]) ? z-- :\r\n          p[a] > q[a] && (r += p[a] - q[a], q[a] = p[a], 0 == z && (I = r / w, j = !0));\r\n        if (200 <= this.status && 400 > this.status)\r\n          if (b) {\r\n            var c = this.getAllResponseHeaders().match(/^Content-Type\\:\\s*(.*?)$/mi)[1] || \"image/png\",\r\n              c = new Blob([this.response], {\r\n                type: c\r\n              });\r\n            f[a] = new Image;\r\n            f[a].onload = y;\r\n            f[a].src = window.URL.createObjectURL(c)\r\n          } else f[a] = this.response, y();\r\n        else console.error(\"Unable to load file \" + Q[a] + \"!\"), y()\r\n      }\r\n    },\r\n    S = void 0 !== (new window.XMLHttpRequest).onprogress,\r\n    s = Q.length,\r\n    R = s;\r\n  t && R++;\r\n  var f = Array(s),\r\n    q = Array(s),\r\n    p = Array(s),\r\n    r = 0,\r\n    w = 0,\r\n    z = s;\r\n  if (!S) {\r\n    for (var g =\r\n        0; g < s; g++) q[g] = 0, p[g] = 1;\r\n    w = s;\r\n    z = 0\r\n  }\r\n  for (g = 0; g < s; g++) {\r\n    var J = Q[g],\r\n      x = J.substr(J.lastIndexOf(\".\")),\r\n      T = \".jpg\" == x || \".bmp\" == x || \".png\" == x,\r\n      x = T || \".bin\" == x;\r\n    if (!S && T) f[g] = new Image, f[g].onload = function () {\r\n      r++;\r\n      I = r / w;\r\n      j = !0;\r\n      y()\r\n    }, f[g].src = J;\r\n    else {\r\n      var A = new XMLHttpRequest;\r\n      A.onload = la(g, T);\r\n      S && (A.onprogress = ka(g));\r\n      A.open(\"GET\", J, !0);\r\n      x && (A.responseType = \"arraybuffer\");\r\n      A.send()\r\n    }\r\n  }\r\n  t && (t(), y())\r\n};"]}