"use strict";$(document).ready(function(){lazy(),scrollInit(),dropdown(),search(),aside(),inputs(),slider(),scrollBtnTop(),select(),gallery(),moreInfo(),calculator(),fancybox(),validation()}),$(window).resize(function(){innerWidth=$("body").innerWidth(),imagesResize()}),$(window).on("scroll",function(){scrollTop=$(window).scrollTop(),scrollBtnTop()});var popupCloseTimer,innerWidth=$("body").innerWidth(),scrollTop=$(window).scrollTop(),$checkbox=$(".checkbox"),$slider=$(".slider"),cursorcolorVar="transparent",cursorwidthVar="15px",cursorborderVar="0",cursorborderradiusVar="0",zindexVar=[100],bouncescrollVar=!1,$scrollContainer=$(".scroll-container");function lazy(){$(".lazy").Lazy({effect:"fadeIn",visibleOnly:!0,effectTime:300,threshold:0,imageBase:!1,defaultImage:!1,afterLoad:function(t){var e=$(t).parent(),o=e.height(),a=e.width(),l=t.height();t.width()/l<=a/o?t.addClass("ww").removeClass("wh"):t.addClass("wh").removeClass("ww"),t.addClass("visible")}})}function scrollBtnTop(){var t=$(".button_scroll-top");200<scrollTop?t.fadeIn():t.fadeOut()}function imagesResize(){setTimeout(function(){$("img.visible").each(function(){var t=$(this).parent(),e=t.height(),o=t.width(),a=$(this).height();$(this).width()/a<=o/e?$(this).addClass("ww").removeClass("wh"):$(this).addClass("wh").removeClass("ww")})},100)}function select(){$("html").hasClass("android")||$("html").hasClass("ios")||$(".select").niceSelect()}function scrollInit(){$scrollContainer.niceScroll(".scroll-wrapper",{cursorcolor:cursorcolorVar,cursorwidth:cursorwidthVar,cursorborder:cursorborderVar,cursorborderradius:cursorborderradiusVar,zindex:zindexVar,bouncescroll:bouncescrollVar,autohidemode:"leave"});setInterval(function(){$scrollContainer.getNiceScroll().resize()},50);if($("html").hasClass("desktop")){$("body").niceScroll({cursorcolor:cursorcolorVar,cursorwidth:cursorwidthVar,cursorborder:cursorborderVar,cursorborderradius:cursorborderradiusVar,zindex:zindexVar,bouncescroll:bouncescrollVar,autohidemode:!0});setInterval(function(){$("body").getNiceScroll().resize()},50);$(".button_scroll-top").on("click",function(t){t.preventDefault(),$("body").getNiceScroll().doScrollPos(0,0)})}else $("html, body").css("overflow","auto"),$(".button_scroll-top").on("click",function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},500)})}function dropdown(){var e,o=$(".dropdown-item__button"),a=$(".dropdown-item__container"),l=$(".dropdown-item");$(document).on("click touchstart",function(t){o.is(t.target)&&t.preventDefault(),e||(e=!0,setTimeout(function(){e=!1},300),!a.is(t.target)&&0===a.has(t.target).length&&!o.is(t.target)&&l.hasClass("visible")||o.is(t.target)&&$(t.target).parents(".dropdown-item").hasClass("visible")?l.removeClass("visible"):o.is(t.target)&&(l.removeClass("visible"),$(t.target).parents(".dropdown-item").addClass("visible")))})}function search(){var t=$(".search-open"),e=$(".search-close"),o=$(".header__search");t.on("click",function(t){t.preventDefault(),o.addClass("visible")}),e.on("click",function(t){t.preventDefault(),o.removeClass("visible")}),$(window).resize(function(){576<innerWidth&&o.removeClass("visible")})}function aside(){var t=$(".catalogue-toggle"),e=$(".filter-toggle, .setup-open"),o=$(".filter-section__title"),a=$(".nav-toggle");t.on("click",function(t){t.preventDefault(),$("html").toggleClass("catalogue-opened"),$("html").hasClass("filter-opened")&&$("html").removeClass("filter-opened"),$(".aside .scroll-container").getNiceScroll().doScrollPos(0,0)}),e.on("click",function(t){t.preventDefault(),$("html").hasClass("nav-opened")||(scrollLock.hide($("body")),$("html").addClass("nav-opened")),$("html").toggleClass("filter-opened"),$(".aside .scroll-container").getNiceScroll().doScrollPos(0,0)}),o.on("click",function(t){t.preventDefault(),$(this).parent().toggleClass("active")}),a.on("click",function(t){t.preventDefault(),$("html").hasClass("nav-opened")?(scrollLock.show($("body")),$("html").removeClass("filter-opened").removeClass("catalogue-opened").removeClass("nav-opened")):(scrollLock.hide($("body")),$("html").addClass("nav-opened"))}),0<scrollTop?$(".aside").addClass("scrolled"):$(".aside").removeClass("scrolled"),$(window).on("scroll",function(){0<scrollTop?$(".aside").addClass("scrolled"):$(".aside").removeClass("scrolled")}),$(window).resize(function(){992<innerWidth&&($("body").removeClass("filter-opened").removeClass("catalogue-opened").removeClass("nav-opened"),scrollLock.show($("body")))})}function inputs(){var t=$(".form-reset-btn"),e=$("input"),o=$("form");function a(){$checkbox.each(function(){$(this).find("input").prop("checked")?$(this).addClass("checked"):$(this).removeClass("checked")})}function l(){o.each(function(){$(this).find(t).length&&(0<$(this).find("input:checked").length||$(this).find("input").val()?$(this).find(t).prop("disabled",!1):t.prop("disabled",!0))})}a(),l(),e.on("change",function(){a(),l()}),t.on("click",function(){setTimeout(function(){a(),l()},100)})}function slider(){$slider.on("init",function(){$(this).addClass("visible")}),$slider.each(function(){$(this).on("init reInit afterChange",function(){lazy()});var t=1,e=1,o=1,a=1,l=1,s=!0,n=!1,r=!1;$(this).hasClass("main-slider__slider")&&(n=r=!0),$(this).hasClass("interesting-items__slider")&&(o=e=3,a=2,l=1,t=4),$(this).hasClass("gallery-slider")&&(r=!(s=!1)),$(this).slick({infinite:!0,dots:!1,arrows:s,speed:400,lazyLoad:"ondemand",adaptiveHeight:!1,centerMode:!1,slidesToShow:t,slidesToScroll:t,fade:r,autoplay:n,autoplaySpeed:3e3,prevArrow:'<button class="slick-prev slick-arrow" aria-label="Previous" type="button"><svg class="icon"><use xlink:href="img/icons/icons-sprite.svg#icon18"></use></svg></button>',nextArrow:'<button class="slick-next slick-arrow" aria-label="Previous" type="button"><svg class="icon"><use xlink:href="img/icons/icons-sprite.svg#icon18"></use></svg></button>',responsive:[{breakpoint:1201,settings:{slidesToShow:e,slidesToScroll:e}},{breakpoint:993,settings:{slidesToShow:o,slidesToScroll:o}},{breakpoint:769,settings:{slidesToShow:a,slidesToScroll:a}},{breakpoint:577,settings:{slidesToShow:l,slidesToScroll:l}},{breakpoint:420,settings:{slidesToShow:1,slidesToScroll:1}}]})})}function gallery(){var t,o=$(".gallery-slider"),e=$(".gallery-nav__link");function l(){t=o.find(".slick-active").index(),e.removeClass("active"),$(".gallery-nav__item").eq(t).find(e).addClass("active")}o.on("swipe beforeChange",function(t,e,o,a){setTimeout(function(){l()},400)}),e.on("click",function(t){t.preventDefault();var e=$(this).parent().index();o.slick("slickGoTo",e),l()})}function moreInfo(){$(".product-head__item .button-toggle").on("click",function(t){t.preventDefault(),$(this).parents(".product-head__item").find(".product-head__more-info").toggleClass("active")})}function calculator(){var l,s,n,r="product-calculator__control",c="product-calculator__js-toggle",i="product-calculator__value-input",u=!1,d=!1,p=!1;function h(t,e){var o=t.closest(".product-item").find(".product-price-total span"),a=t.parents(".cart-form_with-total-price-count").find(".total-price span"),l=t.find(".product-calculator__value-input"),s=t.find(".product-calculator__count-input"),n=parseFloat(+s.val()),r=parseFloat(+l.val()),c=parseFloat(s.data("square")),i=parseFloat(s.data("mincount")),u=parseFloat(s.data("price")),d=0;"increase"==e?(s.val(n+1),n=parseFloat(+s.val()),t.hasClass("product-calculator_js-count-calc")?l.val(n):l.val(parseFloat((n*c).toFixed(2)))):"reduce"==e?i<n&&(s.val(n-1),n=parseFloat(+s.val()),t.hasClass("product-calculator_js-count-calc")?l.val(n):l.val(parseFloat((n*c).toFixed(2)))):"measureChange"==e?t.hasClass("product-calculator_js-count-calc")?l.val(n):l.val(parseFloat((n*c).toFixed(2))):"calculatePrice"==e?t.hasClass("product-calculator_tile")?o.text(parseFloat(((n*c).toFixed(2)*u).toFixed(2))):o.text(parseFloat((n*u).toFixed(2))):"adjustment"==e?n<i?(s.val(i),t.hasClass("product-calculator_js-count-calc")?l.val(i):l.val(parseFloat((i*c).toFixed(2)))):t.hasClass("product-calculator_js-count-calc")?l.val(n):l.val(parseFloat((n*c).toFixed(2))):"calculationTile"==e?t.hasClass("product-calculator_js-count-calc")?s.val(Math.ceil(r)):s.val(Math.ceil(r/c)):"totalPrice"==e&&($(".product-price-total span").each(function(t,e){d+=parseFloat($(e).text())}),a.text(parseFloat(d.toFixed(2))))}$(".product-calculator").each(function(){var t=$(this);h(t,"adjustment"),h(t,"calculatePrice"),h(t,"totalPrice")}),$(".product-calculator").find(".product-calculator__value-input").on("change",function(){}),$(document).on("touchstart touchend mousedown mouseup click blur input mouseout",".product-calculator",function(t){var e=$(t.target),o=$(this);if($(t.target).hasClass(r)||0<$(t.target).parents("."+r).length){var a=function(e){"mousedown"==t.type||"touchstart"==t.type?d||(d=!0,l=setTimeout(function(){u=!0,s=150;n=setTimeout(function t(){45<s&&(s-=5),n=setTimeout(t,s),h(o,e),h(o,"calculatePrice"),h(o,"totalPrice")},s)},300)):"mouseup"!=t.type&&"touchend"!=t.type||p||(p=!0,setTimeout(function(){d=p=!1},100),l=clearTimeout(l),setTimeout(function(){l=clearTimeout(l)},50),n=clearTimeout(n),1==u?u=!1:(h(o,e),h(o,"calculatePrice"),h(o,"totalPrice")))};(e=$(t.target).closest("."+r)).hasClass("product-calculator__plus")?a("increase"):a("reduce")}else $(t.target).hasClass(c)||0<$(t.target).parents("."+c).length?($(t.target).closest("."+c),e=$(t.target).closest("."+c),o.hasClass("product-calculator_tile")&&"click"==t.type&&(e.hasClass("product-calculator__js-toggle_switch")?(o.toggleClass("product-calculator_js-count-calc"),h(o,"measureChange")):e.hasClass("product-calculator__js-toggle_square")?(o.removeClass("product-calculator_js-count-calc"),h(o,"measureChange")):e.hasClass("product-calculator__js-toggle_count")&&(o.addClass("product-calculator_js-count-calc"),h(o,"measureChange")))):($(t.target).hasClass(i)||0<$(t.target).parents("."+i).length)&&($(t.target).closest("."+i),e=$(t.target).closest("."+i),"input"==t.type?(e.val(e.val().replace(/[^\d\.]/g,"")),h(o,"calculationTile"),h(o,"calculatePrice"),h(o,"totalPrice"),1<e.val().match(/\./g).length&&(e.val(e.val().substr(0,e.val().lastIndexOf("."))),h(o,"calculationTile"),h(o,"calculatePrice"),h(o,"totalPrice"))):"mouseout"!=t.type&&"blur"!=t.type||(e.blur(),h(o,"adjustment"),h(o,"calculatePrice"),h(o,"totalPrice")))})}function fancybox(){$.fancybox.defaults.btnTpl.close='<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.6 13.6"><path d="M6.8 5.4L1.4 0 0 1.4l5.4 5.4L0 12.2l1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4L12.2 0z"></path></svg></button>',$.fancybox.defaults.btnTpl.arrowLeft='<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 10.14"><path d="M6.28 8.77l-1.34 1.37L0 5.07 4.94 0l1.34 1.38L3.6 4.1H14v1.94H3.6z"></path></svg></div></button>',$.fancybox.defaults.btnTpl.arrowRight='<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_right" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 10.14"><path d="M10.4 6.04L7.72 8.76l1.34 1.38L14 5.07 9.06 0 7.72 1.38 10.4 4.1H0v1.94z"></path></svg></div></button>',$.fancybox.defaults.btnTpl.zoom='<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.056 14.096"> <path d="M13.756 12.356l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zm-10.6-3.5a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"></path> </svg></button>',$.fancybox.defaults.btnTpl.download='<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.24 14"> <path d="M13.24 12.09V14H0v-1.91zm-2.97-6.96l1.35 1.32-5 4.87-5-4.87 1.36-1.32 2.68 2.64V0h1.92v7.77z"></path> </svg></a>',$.fancybox.defaults.btnTpl.slideShow='<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 13.2"> <path d="M0 0v13.2l11-6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7.35 12.5" id="slideshow"><path d="M0 0h2.2v12.5H0zm5.15 0h2.2v12.5h-2.2z"></path></svg></button>',$.fancybox.defaults.btnTpl.smallBtn='<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.6 13.6"><path d="M6.8 5.4L1.4 0 0 1.4l5.4 5.4L0 12.2l1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4L12.2 0z"></path></svg></button>',$.fancybox.defaults.btnTpl.thumbs='<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.7 12.7" id="slideshow"><path d="M8.94 8.94h3.76v3.76H8.94zm-4.47 0h3.76v3.76H4.47zM0 8.94h3.76v3.76H0zm8.94-4.47h3.76v3.76H8.94zm-4.47 0h3.76v3.76H4.47zM0 4.47h3.76v3.76H0zM8.94 0h3.76v3.76H8.94zM4.47 0h3.76v3.76H4.47zM0 0h3.76v3.76H0z"></path></svg></button>',$.fancybox.defaults.i18n.ru={CLOSE:"Закрыть",NEXT:"Следующий слайд",PREV:"Предидущий слайд",ERROR:"Ошибка загрузки, попробуйте позже.",PLAY_START:"Запустить слайд-шоу",PLAY_STOP:"Остановить слайд-шоу",FULL_SCREEN:"Полноэкранный режим",THUMBS:"Миниатюры",DOWNLOAD:"Загрузить",SHARE:"Поделиться",ZOOM:"Увеличить"},$.fancybox.defaults.lang="ru",$.fancybox.defaults.loop=!0,$.fancybox.defaults.autoFocus=!1,$(document).on("afterShow.fb",function(t,e,o){if(0<$(".panorama").length){var a=o.$thumb.prevObject[0].dataset.pano,l=document.getElementById("pano");Ceramic3DPanorama(l,"",a)}$(o.$content).hasClass("popup")&&validation()})}function validation(){var t=$('input[name="phone"]'),e=$(".validate-form");if(0<e.length){t.mask("+7 (999) 999-99-99",{completed:function(){e.validate().element(t)}}),t.on("keyup",function(){$(this).hasClass("error")&&e.validate().element(t)}),jQuery.validator.addMethod("correctPhone",function(t,e){return!!/^(?!_$)([+]{1}[0-9]{1} [(]{1}[0-9]{3}[)]{1} [0-9]{3}[-]{1}[0-9]{2}[-]{1}[0-9]{2})$/.test(t)}),e.validate({rules:{email:{required:!0,email:!0},name:{required:!0,minlength:2},text:{required:!0,minlength:5},phone:{required:!0,correctPhone:!0}},messages:{email:{required:"Пожалуйста, заполните это поле",email:jQuery.validator.format("Введите корректный адрес электронной почты")},name:{required:"Пожалуйста, заполните это поле",minlength:jQuery.validator.format("Длина имени должна быть больше 1-го символa")},text:{required:"Пожалуйста, заполните это поле",minlength:jQuery.validator.format("Текст сообщения не должен быть короче 5-ти символов")},phone:{required:"Пожалуйста, заполните это поле",correctPhone:jQuery.validator.format("Укажите корректный номер телефона")}},submitHandler:function(t){var e;e=t,$(e).hasClass("contact-form")&&($(e).find(".input").val(""),0<$(e).parents(".popup").length&&$.fancybox.close(),$.fancybox.open({type:"ajax",src:"../popup-succes.html",smallBtn:!0,touch:!1}),popupCloseTimer=setTimeout(function(){$.fancybox.close()},3e3))}})}}function panorama(t){var e=t.data("images");console.log(e)}
//# sourceMappingURL=maps/common.min.js.map
