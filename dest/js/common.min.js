"use strict";$(document).ready(function(){lazy(),scrollInit(),dropdown(),search(),aside(),inputs(),slider(),scrollBtnTop(),select(),gallery(),moreInfo(),calculator(),fancybox(),validation(),designTab(),designForm()}),$(window).resize(function(){innerWidth=$("body").innerWidth(),setTimeout(function(){$("img").each(function(){imagesResize($(this))})},100)}),$(window).on("scroll",function(){scrollTop=$(window).scrollTop(),scrollBtnTop()});var popupCloseTimer,innerWidth=$("body").innerWidth(),scrollTop=$(window).scrollTop(),$checkbox=$(".checkbox, .radio"),$slider=$(".slider"),cursorcolorVar="transparent",cursorwidthVar="15px",cursorborderVar="0",cursorborderradiusVar="0",zindexVar=[100],bouncescrollVar=!1,$scrollContainer=$(".scroll-container");function lazy(){$(".lazy").Lazy({effect:"fadeIn",visibleOnly:!0,effectTime:300,threshold:0,imageBase:!1,defaultImage:!1,afterLoad:function(t){imagesResize(t),t.addClass("visible")}})}function scrollBtnTop(){var t=$(".button_scroll-top");200<scrollTop?t.fadeIn(200):t.fadeOut(200)}function imagesResize(t){var e=t.parent();if(!e.hasClass("cover-box_size-auto")){var o=e.height(),a=e.width(),s=t.height();t.width()/s<=a/o?t.addClass("ww").removeClass("wh"):t.addClass("wh").removeClass("ww")}}function select(){$("html").hasClass("android")||$("html").hasClass("ios")||$(".select").niceSelect()}function scrollInit(){$scrollContainer.niceScroll(".scroll-wrapper",{cursorcolor:cursorcolorVar,cursorwidth:cursorwidthVar,cursorborder:cursorborderVar,cursorborderradius:cursorborderradiusVar,zindex:zindexVar,bouncescroll:bouncescrollVar,autohidemode:"leave"});setInterval(function(){$scrollContainer.getNiceScroll().resize()},50);if($("html").hasClass("desktop")){$("body").niceScroll({cursorcolor:cursorcolorVar,cursorwidth:cursorwidthVar,cursorborder:cursorborderVar,cursorborderradius:cursorborderradiusVar,zindex:zindexVar,bouncescroll:bouncescrollVar,autohidemode:!0});setInterval(function(){$("body").getNiceScroll().resize()},50);$(".button_scroll-top").on("click",function(t){t.preventDefault(),$("body").getNiceScroll().doScrollPos(0,0)})}else $("html, body").css("overflow","auto"),$(".button_scroll-top").on("click",function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},500)})}function dropdown(){var e,o=$(".dropdown-item__button"),a=$(".dropdown-item__container"),s=$(".dropdown-item");$(document).on("click touchstart",function(t){o.is(t.target)&&t.preventDefault(),e||(e=!0,setTimeout(function(){e=!1},300),!a.is(t.target)&&0===a.has(t.target).length&&!o.is(t.target)&&s.hasClass("visible")||o.is(t.target)&&$(t.target).parents(".dropdown-item").hasClass("visible")?s.removeClass("visible"):o.is(t.target)&&(s.removeClass("visible"),$(t.target).parents(".dropdown-item").addClass("visible")))})}function search(){var t=$(".search-open"),e=$(".search-close"),o=$(".header__search");t.on("click",function(t){t.preventDefault(),o.addClass("visible")}),e.on("click",function(t){t.preventDefault(),o.removeClass("visible")}),$(window).resize(function(){576<innerWidth&&o.removeClass("visible")})}function aside(){var t=$(".catalogue-toggle"),e=$(".filter-toggle, .setup-open"),o=$(".filter-section__title"),a=$(".nav-toggle");t.on("click",function(t){t.preventDefault(),$("html").toggleClass("catalogue-opened"),$("html").hasClass("filter-opened")&&$("html").removeClass("filter-opened"),$(".aside .scroll-container").getNiceScroll().doScrollPos(0,0)}),e.on("click",function(t){t.preventDefault(),$("html").hasClass("nav-opened")||(scrollLock.hide($("body")),$("html").addClass("nav-opened")),$("html").toggleClass("filter-opened"),$(".aside .scroll-container").getNiceScroll().doScrollPos(0,0)}),o.on("click",function(t){t.preventDefault(),$(this).parent().toggleClass("active")}),a.on("click",function(t){t.preventDefault(),$("html").hasClass("nav-opened")?(scrollLock.show($("body")),$("html").removeClass("filter-opened").removeClass("catalogue-opened").removeClass("nav-opened")):(scrollLock.hide($("body")),$("html").addClass("nav-opened"))}),0<scrollTop?$(".aside").addClass("scrolled"):$(".aside").removeClass("scrolled"),$(window).on("scroll",function(){0<scrollTop?$(".aside").addClass("scrolled"):$(".aside").removeClass("scrolled")}),$(window).resize(function(){992<innerWidth&&($("body").removeClass("filter-opened").removeClass("catalogue-opened").removeClass("nav-opened"),scrollLock.show($("body")))})}function numChange(t){t.val(t.val().replace(/[^\d,.]*/g,"").replace(/([,.])[,.]+/g,"$1").replace(/^[^\d]*(\d+([.,]\d{0,5})?).*$/g,"$1"))}function inputs(){var t=$(".reset-btn"),e=$("input"),o=$("form");function a(){o.each(function(){$(this).find(t).length&&(0<$(this).find("input:checked").length||$(this).find("input").val()?$(this).find(t).prop("disabled",!1):t.prop("disabled",!0))})}checkboxCheck(),a(),e.on("change",function(){checkboxCheck(),a()}),e.on("input",function(){$(this).hasClass("input_number")&&numChange($(this))}),$('input[type="file"]').on("input",function(){""!=$(this).val()&&($(this).parents(".input-box").find(".label-loaded").remove(),$(this).parents(".input-box").prepend('<span class="label-loaded">План помещения успешно загружен!</span>'))}),t.on("click",function(){setTimeout(function(){checkboxCheck(),a()},100)})}function checkboxCheck(){$checkbox.each(function(){$(this).find("input").prop("checked")?$(this).addClass("checked"):$("#"+$(this).attr("for")).prop("checked")?$(this).addClass("checked"):$(this).removeClass("checked")})}function slider(){$slider.on("init",function(){$(this).addClass("visible")}),$slider.each(function(){$(this).on("init reInit afterChange",function(){lazy()});var t=1,e=1,o=1,a=1,s=1,l=!0,n=!1,c=!1;$(this).hasClass("main-banner__slider")&&(n=c=!0),$(this).hasClass("interesting-items__slider")&&(o=e=3,a=2,s=1,t=4),$(this).hasClass("product-slider")&&(c=!(l=!1)),$(this).hasClass("design-tab__slider")&&(c=!0),$(this).slick({infinite:!0,dots:!1,arrows:l,speed:300,lazyLoad:"ondemand",adaptiveHeight:!1,centerMode:!1,slidesToShow:t,slidesToScroll:t,fade:c,autoplay:n,autoplaySpeed:3e3,prevArrow:'<button class="slick-prev slick-arrow" aria-label="Previous" type="button"><svg class="icon"><use xlink:href="img/icons/icons-sprite.svg#icon18"></use></svg></button>',nextArrow:'<button class="slick-next slick-arrow" aria-label="Previous" type="button"><svg class="icon"><use xlink:href="img/icons/icons-sprite.svg#icon18"></use></svg></button>',responsive:[{breakpoint:1201,settings:{slidesToShow:e,slidesToScroll:e}},{breakpoint:993,settings:{slidesToShow:o,slidesToScroll:o}},{breakpoint:769,settings:{slidesToShow:a,slidesToScroll:a}},{breakpoint:577,settings:{slidesToShow:s,slidesToScroll:s}},{breakpoint:420,settings:{slidesToShow:1,slidesToScroll:1}}]})})}function gallery(){var t,o=$(".product-slider"),e=$(".product-slider-nav__item a");function s(){t=o.find(".slick-active").index(),e.removeClass("active"),$(".product-slider-nav__item").eq(t).find(e).addClass("active")}o.on("swipe beforeChange",function(t,e,o,a){setTimeout(function(){s()},300)}),e.on("click",function(t){t.preventDefault();var e=$(this).parent().index();o.slick("slickGoTo",e),s()})}function designTab(){var o=$(".design-tab"),a=$(".design-info__nav-item .button");o.not(":first-child").hide(),a.on("click",function(t){t.preventDefault();var e=$(this).parent().index();a.removeClass("active"),$(this).addClass("active"),o.hide().eq(e).fadeIn(300),lazy()})}function designForm(){var e=$(".design-form__head-section .content"),o=$(".design-form__tab"),a=$(".design-form__toggle-section .button"),s=0;function l(t){e.removeClass("active"),e.parent().eq(t).find(e).addClass("active"),o.removeClass("active"),o.find("input").prop("checked",!1).prop("disabled",!0),o.eq(t).find("input").prop("disabled",!1),o.eq(t).addClass("active"),checkboxCheck()}l(s),e.on("click",function(t){t.preventDefault(),s=$(this).parent().index(),e.removeClass("active"),l(s)}),a.on("click",function(t){t.preventDefault(),a.removeClass("active"),$(this).addClass("active"),$(this).hasClass("button_toggle_state2")?($(".design-form__brand").show(),$(".design-form__block_style").addClass("active"),$(".design-form__block_style").find("input").prop("disabled",!1),$(".design-form__block_style").find("textarea").val("").prop("disabled",!1)):($(".design-form__brand").hide(),$(".design-form__block_style").removeClass("active"),$(".design-form__block_style").find("input").prop("checked",!1).prop("disabled",!0),$(".design-form__block_style").find("textarea").val("").prop("disabled",!0),checkboxCheck())})}function moreInfo(){$(".product-head__item .button-toggle").on("click",function(t){t.preventDefault(),$(this).parents(".product-head__item").find(".product-head__more-info").toggleClass("active")})}function calculator(){var s,l,n,c="product-calculator__control",r="product-calculator__js-toggle",i="product-calculator__value-input",d=!1,u=!1,p=!1;function h(t,e){var o=t.closest(".product-item").find(".product-price-item span"),a=t.parents(".cart-form_with-total-price-count").find(".order-price span"),s=t.parents(".cart-form_with-total-price-count").find(".total-price span"),l=t.find(".product-calculator__value-input"),n=t.find(".product-calculator__count-input"),c=parseFloat(+n.val()),r=parseFloat(+l.val()),i=parseFloat(n.data("square")),d=parseFloat(n.data("mincount")),u=parseFloat(n.data("price")),p=0,h=0;"increase"==e?(n.val(c+1),c=parseFloat(+n.val()),t.hasClass("product-calculator_js-count-calc")?l.val(c):l.val(parseFloat((c*i).toFixed(2)))):"reduce"==e?d<c&&(n.val(c-1),c=parseFloat(+n.val()),t.hasClass("product-calculator_js-count-calc")?l.val(c):l.val(parseFloat((c*i).toFixed(2)))):"measureChange"==e?t.hasClass("product-calculator_js-count-calc")?l.val(c):l.val(parseFloat((c*i).toFixed(2))):"calculatePrice"==e?t.hasClass("product-calculator_tile")?o.text(parseFloat(((c*i).toFixed(2)*u).toFixed(2))):o.text(parseFloat((c*u).toFixed(2))):"adjustment"==e?c<d?(n.val(d),t.hasClass("product-calculator_js-count-calc")?l.val(d):l.val(parseFloat((d*i).toFixed(2)))):t.hasClass("product-calculator_js-count-calc")?l.val(c):l.val(parseFloat((c*i).toFixed(2))):"calculationTile"==e?t.hasClass("product-calculator_js-count-calc")?n.val(Math.ceil(r)):n.val(Math.ceil(r/i)):"totalPrice"==e&&($(".product-price-item span").each(function(t,e){p+=parseFloat($(e).text())}),s.text(parseFloat(p.toFixed(2))),0<a.length&&(0<$(".product-price-other span").length&&$(".product-price-other span").each(function(t,e){h+=parseFloat($(e).text())}),a.text(parseFloat((p+h).toFixed(2)))))}$(".product-calculator").each(function(){var t=$(this);h(t,"adjustment"),h(t,"calculatePrice"),h(t,"totalPrice")}),$(document).on("touchstart touchend mousedown mouseup click input mouseout",".product-calculator",function(t){var e=$(t.target),o=$(this);if($(t.target).hasClass(c)||0<$(t.target).parents("."+c).length){var a=function(e){"mousedown"==t.type||"touchstart"==t.type?u||(u=!0,s=setTimeout(function(){d=!0,l=150;n=setTimeout(function t(){45<l&&(l-=5),n=setTimeout(t,l),h(o,e),h(o,"calculatePrice"),h(o,"totalPrice")},l)},300)):"mouseup"!=t.type&&"touchend"!=t.type||p||(p=!0,setTimeout(function(){u=p=!1},100),s=clearTimeout(s),setTimeout(function(){s=clearTimeout(s)},50),n=clearTimeout(n),1==d?d=!1:(h(o,e),h(o,"calculatePrice"),h(o,"totalPrice")))};(e=$(t.target).closest("."+c)).hasClass("product-calculator__plus")?a("increase"):a("reduce")}else $(t.target).hasClass(r)||0<$(t.target).parents("."+r).length?($(t.target).closest("."+r),e=$(t.target).closest("."+r),o.hasClass("product-calculator_tile")&&"click"==t.type&&(e.hasClass("product-calculator__js-toggle_switch")?(o.toggleClass("product-calculator_js-count-calc"),h(o,"measureChange")):e.hasClass("product-calculator__js-toggle_square")?(o.removeClass("product-calculator_js-count-calc"),h(o,"measureChange")):e.hasClass("product-calculator__js-toggle_count")&&(o.addClass("product-calculator_js-count-calc"),h(o,"measureChange")))):($(t.target).hasClass(i)||0<$(t.target).parents("."+i).length)&&($(t.target).closest("."+i),e=$(t.target).closest("."+i),"input"==t.type?(numChange(e),h(o,"calculationTile"),h(o,"calculatePrice"),h(o,"totalPrice"),e.on("change",function(){console.log("change"),h(o,"adjustment"),h(o,"calculatePrice"),h(o,"totalPrice")})):"mouseout"==t.type&&e.blur())})}function fancybox(){$.fancybox.defaults.btnTpl.close='<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.6 13.6"><path d="M6.8 5.4L1.4 0 0 1.4l5.4 5.4L0 12.2l1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4L12.2 0z"></path></svg></button>',$.fancybox.defaults.btnTpl.arrowLeft='<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 10.14"><path d="M6.28 8.77l-1.34 1.37L0 5.07 4.94 0l1.34 1.38L3.6 4.1H14v1.94H3.6z"></path></svg></div></button>',$.fancybox.defaults.btnTpl.arrowRight='<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_right" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 10.14"><path d="M10.4 6.04L7.72 8.76l1.34 1.38L14 5.07 9.06 0 7.72 1.38 10.4 4.1H0v1.94z"></path></svg></div></button>',$.fancybox.defaults.btnTpl.zoom='<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.056 14.096"> <path d="M13.756 12.356l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zm-10.6-3.5a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"></path> </svg></button>',$.fancybox.defaults.btnTpl.download='<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.24 14"> <path d="M13.24 12.09V14H0v-1.91zm-2.97-6.96l1.35 1.32-5 4.87-5-4.87 1.36-1.32 2.68 2.64V0h1.92v7.77z"></path> </svg></a>',$.fancybox.defaults.btnTpl.slideShow='<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 13.2"> <path d="M0 0v13.2l11-6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7.35 12.5" id="slideshow"><path d="M0 0h2.2v12.5H0zm5.15 0h2.2v12.5h-2.2z"></path></svg></button>',$.fancybox.defaults.btnTpl.smallBtn='<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.6 13.6"><path d="M6.8 5.4L1.4 0 0 1.4l5.4 5.4L0 12.2l1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4L12.2 0z"></path></svg></button>',$.fancybox.defaults.btnTpl.thumbs='<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.7 12.7" id="slideshow"><path d="M8.94 8.94h3.76v3.76H8.94zm-4.47 0h3.76v3.76H4.47zM0 8.94h3.76v3.76H0zm8.94-4.47h3.76v3.76H8.94zm-4.47 0h3.76v3.76H4.47zM0 4.47h3.76v3.76H0zM8.94 0h3.76v3.76H8.94zM4.47 0h3.76v3.76H4.47zM0 0h3.76v3.76H0z"></path></svg></button>',$.fancybox.defaults.i18n.ru={CLOSE:"Закрыть",NEXT:"Следующий слайд",PREV:"Предидущий слайд",ERROR:"Ошибка загрузки, попробуйте позже.",PLAY_START:"Запустить слайд-шоу",PLAY_STOP:"Остановить слайд-шоу",FULL_SCREEN:"Полноэкранный режим",THUMBS:"Миниатюры",DOWNLOAD:"Загрузить",SHARE:"Поделиться",ZOOM:"Увеличить"},$.fancybox.defaults.lang="ru",$.fancybox.defaults.loop=!0,$.fancybox.defaults.autoFocus=!1,$(document).on("afterShow.fb",function(t,e,o){if(0<$(".panorama").length){var a=o.$thumb.prevObject[0].dataset.pano,s=document.getElementById("pano");Ceramic3DPanorama(s,"",a)}$(o.$content).hasClass("popup")&&validation()})}function validation(){var t=$('input[name="phone"]'),e=$(".validate-form");if(0<e.length){t.mask("+7 (999) 999-99-99",{completed:function(){e.validate().element(t)}}),t.on("keyup",function(){$(this).hasClass("error")&&e.validate().element(t)}),$.validator.addMethod("correctPhone",function(t,e){return!!/^(?!_$)([+]{1}[0-9]{1} [(]{1}[0-9]{3}[)]{1} [0-9]{3}[-]{1}[0-9]{2}[-]{1}[0-9]{2})$/.test(t)}),$.validator.addMethod("req",$.validator.methods.required,"Пожалуйста, заполните это поле"),$.validator.addClassRules("required",{req:!0}),e.validate({rules:{email:{email:!0},phone:{required:!0,correctPhone:!0},personalData:{required:!0},payment:{required:!0}},messages:{email:{required:"Пожалуйста, заполните это поле",email:jQuery.validator.format("Введите корректный адрес электронной почты")},payment:{required:"Пожалуйста, выберите способ оплаты"},personalData:{required:"Согласие обязательно для продолжения"},phone:{required:"Пожалуйста, заполните это поле",correctPhone:jQuery.validator.format("Укажите корректный номер телефона")}},submitHandler:function(t){var e;e=t,$(e).hasClass("contact-form")&&($(e).find(".input").val(""),0<$(e).parents(".popup").length&&$.fancybox.close(),$.fancybox.open({type:"ajax",src:"../popup-succes.html",smallBtn:!0,touch:!1}),popupCloseTimer=setTimeout(function(){$.fancybox.close()},3e3)),$(e).hasClass("cart-form2")?document.location.href="cart-stage3.html":$(e).hasClass("cart-form3")&&(document.location.href="cart-stage4.html")}})}}
//# sourceMappingURL=maps/common.min.js.map
