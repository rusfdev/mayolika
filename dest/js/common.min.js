"use strict";function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}$(document).ready(function(){lazy(),scrollInit(),dropdown(),search(),aside(),inputs(),slider(),scrollBtnTop(),select(),gallery(),moreInfo(),calculator(),popup(),validation()}),$(window).resize(function(){innerWidth=$("body").innerWidth(),imagesResize()}),$(window).on("scroll",function(){scrollTop=$(window).scrollTop(),scrollBtnTop()});var popupCloseTimer,innerWidth=$("body").innerWidth(),scrollTop=$(window).scrollTop(),$checkbox=$(".checkbox"),$slider=$(".slider"),cursorcolorVar="transparent",cursorwidthVar="15px",cursorborderVar="0",cursorborderradiusVar="0",zindexVar=[100],bouncescrollVar=!1,$scrollContainer=$(".scroll-container");function lazy(){$(".lazy").Lazy({effect:"fadeIn",visibleOnly:!0,effectTime:300,threshold:0,imageBase:!1,defaultImage:!1,afterLoad:function(e){var t=$(e).parent(),o=t.height(),l=t.width(),a=e.height();e.width()/a<=l/o?e.addClass("ww").removeClass("wh"):e.addClass("wh").removeClass("ww"),e.addClass("visible")}})}function scrollBtnTop(){var e=$(".button_scroll-top");200<scrollTop?e.fadeIn():e.fadeOut()}function imagesResize(){setTimeout(function(){$("img.visible").each(function(){var e=$(this).parent(),t=e.height(),o=e.width(),l=$(this).height();$(this).width()/l<=o/t?$(this).addClass("ww").removeClass("wh"):$(this).addClass("wh").removeClass("ww")})},100)}function select(){$("html").hasClass("android")||$("html").hasClass("ios")||$(".select").niceSelect()}function scrollInit(){$scrollContainer.niceScroll(".scroll-wrapper",{cursorcolor:cursorcolorVar,cursorwidth:cursorwidthVar,cursorborder:cursorborderVar,cursorborderradius:cursorborderradiusVar,zindex:zindexVar,bouncescroll:bouncescrollVar,autohidemode:"leave"});setInterval(function(){$scrollContainer.getNiceScroll().resize()},50);if($("html").hasClass("desktop")){$("body").niceScroll({cursorcolor:cursorcolorVar,cursorwidth:cursorwidthVar,cursorborder:cursorborderVar,cursorborderradius:cursorborderradiusVar,zindex:zindexVar,bouncescroll:bouncescrollVar,autohidemode:!0});setInterval(function(){$("body").getNiceScroll().resize()},50);$(".button_scroll-top").on("click",function(e){e.preventDefault(),$("body").getNiceScroll().doScrollPos(0,0)})}else $("html, body").css("overflow","auto"),$(".button_scroll-top").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},500)})}function dropdown(){var t,o=$(".dropdown-item__button"),l=$(".dropdown-item__container"),a=$(".dropdown-item");$(document).on("click touchstart",function(e){o.is(e.target)&&e.preventDefault(),t||(t=!0,setTimeout(function(){t=!1},300),!l.is(e.target)&&0===l.has(e.target).length&&!o.is(e.target)&&a.hasClass("visible")||o.is(e.target)&&$(e.target).parents(".dropdown-item").hasClass("visible")?a.removeClass("visible"):o.is(e.target)&&(a.removeClass("visible"),$(e.target).parents(".dropdown-item").addClass("visible")))})}function search(){var e=$(".search-open"),t=$(".search-close"),o=$(".header__search");e.on("click",function(e){e.preventDefault(),o.addClass("visible")}),t.on("click",function(e){e.preventDefault(),o.removeClass("visible")}),$(window).resize(function(){576<innerWidth&&o.removeClass("visible")})}function aside(){var e=$(".catalogue-toggle"),t=$(".filter-toggle, .setup-open"),o=$(".filter-section__title"),l=$(".nav-toggle");e.on("click",function(e){e.preventDefault(),$("html").toggleClass("catalogue-opened"),$("html").hasClass("filter-opened")&&$("html").removeClass("filter-opened"),$(".aside .scroll-container").getNiceScroll().doScrollPos(0,0)}),t.on("click",function(e){e.preventDefault(),$("html").hasClass("nav-opened")||(scrollLock.hide($("body")),$("html").addClass("nav-opened")),$("html").toggleClass("filter-opened"),$(".aside .scroll-container").getNiceScroll().doScrollPos(0,0)}),o.on("click",function(e){e.preventDefault(),$(this).parent().toggleClass("active")}),l.on("click",function(e){e.preventDefault(),$("html").hasClass("nav-opened")?(scrollLock.show($("body")),$("html").removeClass("filter-opened").removeClass("catalogue-opened").removeClass("nav-opened")):(scrollLock.hide($("body")),$("html").addClass("nav-opened"))}),0<scrollTop?$(".aside").addClass("scrolled"):$(".aside").removeClass("scrolled"),$(window).on("scroll",function(){0<scrollTop?$(".aside").addClass("scrolled"):$(".aside").removeClass("scrolled")}),$(window).resize(function(){992<innerWidth&&($("body").removeClass("filter-opened").removeClass("catalogue-opened").removeClass("nav-opened"),scrollLock.show($("body")))})}function inputs(){var e=$(".form-reset-btn"),t=$("input"),o=$("form");function l(){$checkbox.each(function(){$(this).find("input").prop("checked")?$(this).addClass("checked"):$(this).removeClass("checked")})}function a(){o.each(function(){$(this).find(e).length&&(0<$(this).find("input:checked").length||$(this).find("input").val()?$(this).find(e).prop("disabled",!1):e.prop("disabled",!0))})}l(),a(),t.on("change",function(){l(),a()}),e.on("click",function(){setTimeout(function(){l(),a()},100)})}function slider(){$slider.on("init",function(){$(this).addClass("visible")}),$slider.each(function(){$(this).on("init reInit afterChange",function(){lazy()});var e=1,t=1,o=1,l=1,a=1,s=!0,r=!1,n=!1;$(this).hasClass("main-slider__slider")&&(r=n=!0),$(this).hasClass("interesting-items__slider")&&(o=t=3,l=2,a=1,e=4),$(this).hasClass("gallery-slider")&&(n=!(s=!1)),$(this).slick({infinite:!0,dots:!1,arrows:s,speed:400,lazyLoad:"ondemand",adaptiveHeight:!1,centerMode:!1,slidesToShow:e,slidesToScroll:e,fade:n,autoplay:r,autoplaySpeed:3e3,prevArrow:'<button class="slick-prev slick-arrow" aria-label="Previous" type="button"><svg class="icon"><use xlink:href="img/icons/icons-sprite.svg#icon18"></use></svg></button>',nextArrow:'<button class="slick-next slick-arrow" aria-label="Previous" type="button"><svg class="icon"><use xlink:href="img/icons/icons-sprite.svg#icon18"></use></svg></button>',responsive:[{breakpoint:1201,settings:{slidesToShow:t,slidesToScroll:t}},{breakpoint:993,settings:{slidesToShow:o,slidesToScroll:o}},{breakpoint:769,settings:{slidesToShow:l,slidesToScroll:l}},{breakpoint:577,settings:{slidesToShow:a,slidesToScroll:a}},{breakpoint:420,settings:{slidesToShow:1,slidesToScroll:1}}]})})}function gallery(){var e,o=$(".gallery-slider"),t=$(".gallery-nav__link");function a(){e=o.find(".slick-active").index(),t.removeClass("active"),$(".gallery-nav__item").eq(e).find(t).addClass("active")}o.on("swipe beforeChange",function(e,t,o,l){setTimeout(function(){a()},400)}),t.on("click",function(e){e.preventDefault();var t=$(this).parent().index();o.slick("slickGoTo",t),a()})}function moreInfo(){$(".product-head__item .button-toggle").on("click",function(e){e.preventDefault(),$(this).parents(".product-head__item").find(".product-head__more-info").toggleClass("active")})}function calculator(){var a,s,r,n="product-calculator__control",c="product-calculator__js-toggle",i="product-calculator__value-input",u=!1,d=!1,p=!1;function h(e,t){var o=parseFloat($(e).find(".product-calculator__value-input").data("square").toFixed(2)),l=parseFloat((Math.ceil(+$(e).find(".product-calculator__value-input").data("minsquare")/o)*o).toFixed(2)),a=e.find(".product-calculator__value-input"),s=+$(e).find(".product-calculator__value-input").data("price"),r=e.find(".product-calculator__total-price"),n=+a.val();if("increase"==t)$(e).hasClass("product-calculator_js-count-calc")?a.val(parseFloat((n+1).toFixed(0))):a.val(parseFloat((n+o).toFixed(2)));else if("reduce"==t)$(e).hasClass("product-calculator_js-count-calc")?l/o<n&&a.val(parseFloat((n-1).toFixed(0))):l<n&&a.val(parseFloat((n-o).toFixed(2)));else if("measureChange"==t)$(e).hasClass("product-calculator_js-count-calc")?a.val(parseFloat((n/o).toFixed(0))):a.val(parseFloat((n*o).toFixed(2)));else if("calculatePrice"==t)$(e).hasClass("product-calculator_js-count-calc")?r.text(parseFloat((n*o*s).toFixed(2))):r.text(parseFloat((n*s).toFixed(2)));else if("adjustment"==t){var c;if($(e).hasClass("product-calculator_js-count-calc"))(c=Math.ceil(n))<l/o?a.val(parseFloat((l/o).toFixed(0))):a.val(parseFloat(c.toFixed(0)));else(c=parseFloat((Math.floor(n/o)*o).toFixed(2)))<l?a.val(parseFloat(l.toFixed(2))):n!=c&&(console.log(c+o),a.val(parseFloat((c+o).toFixed(2))))}}$(".product-calculator").each(function(){var e=$(this);h(e,"adjustment"),h(e,"calculatePrice")}),$(".product-calculator").find(".product-calculator__value-input").on("change",function(){var e=$(this).parents(".product-calculator");h(e,"adjustment"),h(e,"calculatePrice")}),$(document).on("touchstart touchend mousedown mouseup click input mouseout",".product-calculator",function(e){var t=$(e.target),o=$(this);if($(e.target).hasClass(n)||0<$(e.target).parents("."+n).length){var l=function(t){"mousedown"==e.type||"touchstart"==e.type?d||(d=!0,a=setTimeout(function(){u=!0,s=150;r=setTimeout(function e(){45<s&&(s-=5),r=setTimeout(e,s),h(o,t),h(o,"calculatePrice")},s)},300)):"mouseup"!=e.type&&"touchend"!=e.type||p||(p=!0,setTimeout(function(){d=p=!1},100),a=clearTimeout(a),setTimeout(function(){a=clearTimeout(a)},50),r=clearTimeout(r),1==u?u=!1:(h(o,t),h(o,"calculatePrice")))};(t=$(e.target).closest("."+n)).hasClass("product-calculator__plus")?l("increase"):l("reduce")}else $(e.target).hasClass(c)||0<$(e.target).parents("."+c).length?($(e.target).closest("."+c),t=$(e.target).closest("."+c),"click"==e.type&&(t.hasClass("product-calculator__js-toggle_switch")?(o.toggleClass("product-calculator_js-count-calc"),h(o,"measureChange")):t.hasClass("product-calculator__js-toggle_square")?(o.removeClass("product-calculator_js-count-calc"),h(o,"measureChange")):t.hasClass("product-calculator__js-toggle_count")&&(o.addClass("product-calculator_js-count-calc"),h(o,"measureChange")))):($(e.target).hasClass(i)||0<$(e.target).parents("."+i).length)&&($(e.target).closest("."+i),t=$(e.target).closest("."+i),"input"==e.type?(t.val(t.val().replace(/[^\d\.]/g,"")),h(o,"calculatePrice"),1<t.val().match(/\./g).length&&(t.val(t.val().substr(0,t.val().lastIndexOf("."))),h(o,"calculatePrice"))):"mouseout"==e.type&&(t.blur(),h(o,"adjustment"),h(o,"calculatePrice")))})}function popup(){$(".popup-link").on("click",function(){modalOpen($($(this).attr("href")),!1)}),$(".modal-link").fancybox({autoFocus:!1,smallBtn:!0,touch:!1}),$(".gallery-slide a").on("click",function(){var e=$(this).parents(".gallery").find(".slick-slide:not(.slick-cloned) a");return $.fancybox.open(e,{selector:e,backFocus:!1,loop:!0,animationEffect:"fade"},e.index(this)),!1})}function modalOpen(e,t){var o;$.fancybox.open(e,(_defineProperty(o={autoFocus:!1,loop:!1},"autoFocus",!1),_defineProperty(o,"type","html"),_defineProperty(o,"smallBtn",!0),_defineProperty(o,"touch",!1),_defineProperty(o,"btnTpl",{smallBtn:'<button type="button" data-fancybox-close class="button button_style2 button-toggle fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" stroke="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.115 1.49L12.689.118 7.193 5.819 1.491.323.117 1.748 5.82 7.244.323 12.947l1.426 1.373 5.496-5.702 5.702 5.496 1.374-1.425-5.702-5.496 5.496-5.702z"></path></svg></button>'}),_defineProperty(o,"afterClose",function(){1==t&&(popupCloseTimer=clearTimeout(popupCloseTimer))}),o))}function validation(){var e=$('input[name="phone"]'),t=$(".validate-form");if(0<t.length){e.mask("+7 (999) 999-99-99",{completed:function(){t.validate().element(e)}}),e.on("keyup",function(){$(this).hasClass("error")&&t.validate().element(e)}),jQuery.validator.addMethod("correctPhone",function(e,t){return!!/^(?!_$)([+]{1}[0-9]{1} [(]{1}[0-9]{3}[)]{1} [0-9]{3}[-]{1}[0-9]{2}[-]{1}[0-9]{2})$/.test(e)}),t.validate({rules:{email:{required:!0,email:!0},name:{required:!0,minlength:2},text:{required:!0,minlength:5},phone:{required:!0,correctPhone:!0}},messages:{email:{required:"Пожалуйста, заполните это поле",email:jQuery.validator.format("Введите корректный адрес электронной почты")},name:{required:"Пожалуйста, заполните это поле",minlength:jQuery.validator.format("Длина имени должна быть больше 1-го символa")},text:{required:"Пожалуйста, заполните это поле",minlength:jQuery.validator.format("Текст сообщения не должен быть короче 5-ти символов")},phone:{required:"Пожалуйста, заполните это поле",correctPhone:jQuery.validator.format("Укажите корректный номер телефона")}},submitHandler:function(e){var t;t=e,$(t).find(".input").val(""),0<$(t).parents(".popup").length&&$.fancybox.close(),modalOpen($('<div class="popup popup-succes fancybox-content" id="popup-succes" style="display: none;"> <div class="popup-succes__container"> <div class="popup-succes__icon popup-succes__item"><svg class="icon"><use xlink:href="img/icons/icons-sprite.svg#icon20"></use></svg></div><div class="popup-succes__text">Благодарим за Вашу заявку. </div><div class="popup-succes__text">Наш дизайнер свяжется с вами в ближайшее время</div><a class="button button_style1 popup-succes__close" href="#" data-fancybox-close="">Закрыть</a> </div><button type="button" data-fancybox-close="" class="button button_style2 button-toggle fancybox-button fancybox-close-small" title="Close"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" stroke="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.115 1.49L12.689.118 7.193 5.819 1.491.323.117 1.748 5.82 7.244.323 12.947l1.426 1.373 5.496-5.702 5.702 5.496 1.374-1.425-5.702-5.496 5.496-5.702z"></path></svg></button></div>'),!0),popupCloseTimer=setTimeout(function(){$.fancybox.close()},3e3)}})}}
//# sourceMappingURL=maps/common.min.js.map
